# PoetryMatch: å¤å…¸è¯—æ­ŒåŒ¹é…ç³»ç»Ÿ

## ğŸ“– é¡¹ç›®ç®€ä»‹

**PoetryMatch** æ˜¯ä¸€ä¸ªè‡ªç„¶è¯­è¨€å¤„ç† (NLP) é¡¹ç›®ï¼Œæ—¨åœ¨å°†ç°ä»£æ–‡æè¿°ä¸å…¶å¯¹åº”çš„ä¸­å›½å¤å…¸è¯—å¥è¿›è¡ŒåŒ¹é…ã€‚è¯¥ä»»åŠ¡æŒ‘æˆ˜æ¨¡å‹ç†è§£ç°ä»£æ±‰è¯­å’Œå¤å…¸æ±‰è¯­è¯­ä¹‰çš„èƒ½åŠ›ï¼Œå¹¶è¦æ±‚æ¨¡å‹èƒ½å¤Ÿä»å€™é€‰é¡¹ä¸­è¯†åˆ«å‡ºä¸ç»™å®šç°ä»£æ–‡è¯­å¢ƒæœ€åŒ¹é…çš„è¯—å¥ã€‚

ç»™å®šä¸€æ®µç°ä»£æ–‡æè¿°å’Œå››å¥å€™é€‰å¤è¯—ï¼Œç³»ç»Ÿéœ€è¦è¯†åˆ«å‡ºæœ€ç¬¦åˆæè¿°çš„é‚£ä¸€å¥ã€‚

ç¤ºä¾‹ï¼š
> **æè¿°**: ä¸€ç”Ÿå½“ä¸­ç–¾ç—…ç¼ èº«ä»Šæ—¥ç‹¬ä¸Šé«˜å°ã€‚
>
> **å€™é€‰é¡¹**:
> 1. ä¸€æ˜¥å¤šç—…å‡ ç™»å°
> 2. **ç™¾å¹´å¤šç—…ç‹¬ç™»å°** (æ­£ç¡®ç­”æ¡ˆ)
> 3. ç™¾å¹´å¤šç—…è´Ÿç™»ä¸´
> 4. å†µå¤šæ„ç—…ç‹¬ç™»å°

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
PoetryMatch/
â”œâ”€â”€ datasets/               # æ•°æ®ç›®å½•
â”‚   â”œâ”€â”€ train.jsonl         # è®­ç»ƒé›† (7000 æ¡)
â”‚   â”œâ”€â”€ val.jsonl           # éªŒè¯é›†
â”‚   â””â”€â”€ test.jsonl          # æµ‹è¯•é›† (1000 æ¡)
â”œâ”€â”€ src/                    # æºä»£ç 
â”‚   â”œâ”€â”€ config.py           # é…ç½®å‚æ•°
â”‚   â”œâ”€â”€ dataset.py          # æ•°æ®åŠ è½½ä¸å¤„ç†
â”‚   â”œâ”€â”€ evaluate.py         # è¯„ä¼°è„šæœ¬
â”‚   â”œâ”€â”€ model.py            # æ¨¡å‹å®šä¹‰
â”‚   â”œâ”€â”€ train.py            # è®­ç»ƒè„šæœ¬
â”‚   â””â”€â”€ utils.py            # å·¥å…·å‡½æ•°
â”œâ”€â”€ requirements.txt        # Python ä¾èµ–
â”œâ”€â”€ README.md               # é¡¹ç›®æ–‡æ¡£
â””â”€â”€ .gitignore              # Git å¿½ç•¥æ–‡ä»¶
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‡†å¤‡å·¥ä½œ

- Python 3.7+
- æ”¯æŒ CUDA çš„ GPU (å»ºè®®ç”¨äºè®­ç»ƒ)

### å®‰è£…

1. å…‹éš†ä»“åº“ï¼š
   ```bash
   git clone https://github.com/yourusername/PoetryMatch.git
   cd PoetryMatch
   ```

2. å®‰è£…ä¾èµ–ï¼š
   ```bash
   pip install -r requirements.txt
   ```

### æ•°æ®é›†å‡†å¤‡

ç¡®ä¿æ‚¨çš„æ•°æ®é›†æ–‡ä»¶ (`train.jsonl`, `val.jsonl`, `test.jsonl`) ä½äº `datasets/` ç›®å½•ä¸‹ã€‚JSONL æ–‡ä»¶ä¸­çš„æ¯ä¸€è¡Œéƒ½åº”æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ JSON å¯¹è±¡ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š

```json
{
  "id": 5253, 
  "translation": "è‡ªè¯´æ˜¯æ–°è¿‘é‡Œç«‹åŠŸå°å®˜ã€‚", 
  "choices": ["æ–°å°ä¸‡æˆ·ä¾¯", "ä¸­é“æ••å°ä¾¯", "æ–°å°åƒæˆ·ä¾¯", "è‡ªé“æ–°å°ä¾¯"], 
  "answer": 3
}
```

## ğŸ› ï¸ ä½¿ç”¨æŒ‡å—

### è®­ç»ƒ

è¿è¡Œ `train.py` è„šæœ¬ä»¥è®­ç»ƒæ¨¡å‹ã€‚æ‚¨å¯ä»¥åœ¨ `src/config.py` ä¸­è°ƒæ•´è¶…å‚æ•°ã€‚

```bash
python src/train.py
```

è¯¥è„šæœ¬å°†æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š
- åŠ è½½é¢„è®­ç»ƒçš„ BERT æ¨¡å‹ (é»˜è®¤: `bert-base-chinese`)ã€‚
- åœ¨è®­ç»ƒé›†ä¸Šè¿›è¡Œè®­ç»ƒã€‚
- æ¯ä¸ª epoch ç»“æŸååœ¨éªŒè¯é›†ä¸Šè¿›è¡ŒéªŒè¯ã€‚
- å°†éªŒè¯é›†å‡†ç¡®ç‡æœ€é«˜çš„æ¨¡å‹ä¿å­˜åˆ° `models/saved_best/`ã€‚

### è¯„ä¼°

è¦åœ¨æµ‹è¯•é›†ä¸Šè¯„ä¼°è®­ç»ƒå¥½çš„æ¨¡å‹ï¼Œè¯·è¿è¡Œï¼š

```bash
python src/evaluate.py
```

è¿™å°†åŠ è½½ `models/saved_best/` ä¸­çš„æœ€ä½³æ¨¡å‹ï¼Œå¹¶åœ¨æµ‹è¯•é›†ä¸Šè¾“å‡ºå‡†ç¡®ç‡ã€‚

## ğŸ“Š è¯„ä»·æŒ‡æ ‡

æ¨¡å‹ä½¿ç”¨ **å‡†ç¡®ç‡ (Accuracy)** è¿›è¡Œè¯„ä¼°ï¼š

$$
Acc = \frac{1}{N} \sum_{i=1}^N \mathbb{I}(x_i = y_i)
$$

å…¶ä¸­ $N$ æ˜¯æ ·æœ¬æ€»æ•°ï¼Œ$x_i$ æ˜¯é¢„æµ‹ç±»åˆ«ï¼Œ$y_i$ æ˜¯çœŸå®æ ‡ç­¾ã€‚

## ğŸ¤– æ¨¡å‹æ”¯æŒ

æœ¬é¡¹ç›®æ”¯æŒåŸºäº BERT çš„æ¨¡å‹ã€‚é»˜è®¤æƒ…å†µä¸‹ä½¿ç”¨ `bert-base-chinese`ã€‚æ‚¨ä¹Ÿå¯ä»¥é€šè¿‡ä¿®æ”¹ `src/config.py` åˆ‡æ¢åˆ°å…¶ä»–é¢„è®­ç»ƒæ¨¡å‹ï¼Œå¦‚ `ethanyt/guwenbert-base` (ä¸“ä¸ºå¤æ–‡ä¼˜åŒ–)ã€‚

## ğŸ¤ è‡´è°¢

- Hugging Face Transformers æä¾›æ¨¡å‹æ¶æ„æ”¯æŒã€‚
- é¢„è®­ç»ƒæ¨¡å‹ï¼š`bert-base-chinese`, `guwenbert`ã€‚
